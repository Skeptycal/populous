world: &world
  table: demo_world
  count: 0
  fields:
    id:
      generator: AutoIncrement
      params:
        null: false
    name:
      generator: Text
      params:
        null: false
        min_length: 1
        max_length: 30
    description:
      generator: Text
      params:
        null: false
        min_length: 0
        max_length: null

city: &city
  table: demo_city
  count: 0
  fields:
    id:
      generator: AutoIncrement
      params:
        null: false
    world_id:
      generator: ForeignKey
      params:
        null: false
        target: world
        field: id
    name:
      generator: Text
      params:
        null: false
        min_length: 1
        max_length: 40

abode: &abode
  table: demo_abode
  count: 0
  fields:
    id:
      generator: AutoIncrement
      params:
        null: false
    city_id:
      generator: ForeignKey
      params:
        null: false
        target: city
        field: id
    owner:
      generator: ForeignKey
      params:
        null: true
        target: citizen
        field: id
        unique: true
    type:
      generator: Choices
      params:
        null: false
        choices: ['SH', 'H', 'SB', 'B']

citizen: &citizen
  table: demo_citizen
  count: 0
  fields:
    id:
      generator: AutoIncrement
      params:
        null: false
    abode_id:
      generator: ForeignKey
      params:
        null: false
        target: abode
        field: id
    first_name:
      generator: Text
      params:
        null: false
        min_length: 1
        max_length: 20
    middle_name:
      generator: Text
      params:
        null: false
        min_length: 0
        max_length: 20
    last_name:
      generator: Text
      params:
        null: false
        min_length: 1
        max_length: 20
    birth:
      generator: Date
      params:
        null: false
    gender:
      generator: Choices
      params:
        null: false
        choices: ['M', 'F']

hobby: &hobby
  table: demo_hobby
  count: 0
  fields:
    id:
      generator: AutoIncrement
      params:
        null: false
    name:
      generator: Text
      params:
        null: false
        min_length: 1
        max_length: 40

hobby_citizens_through_table: &hobby_citizens_through_table
  table: demo_hobby_citizens
  count: 0
  fields:
    id:
      generator: AutoIncrement
      params:
        null: false
    hobby_id:
      generator: ForeignKey
      params:
        null: false
        target: hobby
        field: id
    citizen_id:
      generator: ForeignKey
      params:
        null: false
        target: citizen
        field: id
